{% extends 'base.html' %}
{% load static %}

{% block title %}About GYWAN - Our Story and Mission{% endblock %}

{% block content %}
<div class="about-page">
<!-- Page Header -->
<section class="page-header">
    <div class="container">
         <h1 class="page-title fade-in">About GYWAN</h1>

        <p class="page-subtitle fade-in">Empowering girls and young women to become confident leaders and changemakers</p>
    </div>
</section>

<!-- Our Story Section -->
<section class="story-section" data-aos="fade-up">
    <div class="container">
        <!-- Flex Row: Text + Image -->
        <div class="story-content" style="display: flex; flex-wrap: wrap; align-items: center; justify-content: space-between; gap: 40px;">
            
            <!-- Text Column -->
            <div class="story-text" style="flex: 1 1 500px;">
                <h2 class="section-title fade-in">Our Story</h2>
                <div class="story-paragraphs fade-in" style="line-height: 1.7; color: #333; font-size: 1rem;">
                    <p>Girls and Young Women’s Advocacy Network (GYWAN) is a vibrant, young woman-led organization born out of lived experience, deep conviction, and a refusal to accept the status quo.</p>

                    <p>Our founder, Mellicentia Boateng, grew up in a community where inequality was the norm, a place where girls were expected to remain silent, stay small, and survive systems built against them. For years, she believed this reality was unchangeable, until exposure to knowledge and advocacy opened her eyes. That awakening stirred something powerful: a commitment to raise her voice and never again be silent in the face of injustice.</p>

                    <p>Coming from a home affected by gender-based violence, Mellicentia intimately understood the pain of silence, fear, and invisibility. She vowed not just to break that cycle for herself, but to build a movement where no girl or young woman would have to endure it again, alone or unheard.</p>

                    <p>What began as a bold idea has grown into GYWAN, a fast-growing network of passionate young women and allies working to dismantle the barriers that hold girls back. Founded on the belief that every young person deserves to thrive in a safe, inclusive, and rights-respecting society, GYWAN emerged as a movement for gender equality, youth empowerment, and social justice.</p>

                    <p>Our leadership is powered by vibrant, committed young women and men who bring their energy, experience, and vision to every space we occupy—from grassroots communities to national policy tables and international platforms. We design and lead campaigns, capacity-building initiatives, and advocacy efforts that amplify the voices of girls and young women, not just as beneficiaries, but as co-creators and leaders of lasting change.</p>
                </div>
            </div>

            <!-- Image Column -->
            <div class="story-image fade-in" style="flex: 1 1 350px; display: flex; flex-direction: column; align-items: center; margin-top: 20px;">
                <img src="{% static 'images/millicentia.png' %}" 
                     alt="Mellicentia Boateng, Founder of GYWAN"
                     style="width: 100%; max-width: 320px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); object-fit: cover;">
                
                <div class="image-caption" style="margin-top: 16px; text-align: center;">
                    <i class="fas fa-quote-left" style="color: #8824C7; font-size: 1.2rem;"></i>
                    <h3 style="margin: 8px 0 4px; font-size: 1.2rem; color: #8824C7;">Mellicentia Boateng</h3>
                    <p style="margin: 0; font-size: 0.95rem; color: #555;">Founder & Executive Director</p>
                </div>
            </div>
        </div>

        <!-- Centered Statement Below Image + Text -->
        <div class="fade-in" style="margin-top: 50px; text-align: center;">
            <p style="font-size: 1.25rem; color: #673ab7; max-width: 800px; margin: 0 auto;">
                <em>Together, we are building a future where every girl and young woman can live free from violence, claim her rights, and boldly shape the world around her.</em>
            </p>
        </div>
    </div>
</section>

 <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
        }

        .mvv-carousel-container {
            max-width: 1200px;
            width: 90%;
            position: relative;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .carousel-header {
            background: linear-gradient(135deg, #D4AF37, #F4E06D);
            text-align: center;
            padding: 30px 20px;
            color: white;
            position: relative;
        }

        .carousel-header h1 {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .carousel-header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .carousel-wrapper {
            position: relative;
            height: 600px;
            overflow: hidden;
        }

        .carousel-track {
            display: flex;
            width: 300%;
            height: 100%;
            transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .mvv-slide {
            width: 33.333%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 60px 40px;
            position: relative;
        }

        .slide-content {
            display: flex;
            align-items: center;
            gap: 40px;
            max-width: 900px;
            width: 100%;
        }

        .slide-icon {
            flex-shrink: 0;
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #D4AF37, #F4E06D);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.3);
            animation: float 3s ease-in-out infinite;
        }

        .slide-icon i {
            font-size: 3rem;
            color: white;
        }

        .slide-text {
            flex: 1;
        }

        .slide-text h2 {
            font-size: 2.5rem;
            color: #333;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .slide-text p {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #555;
        }

        .values-list {
            display: grid;
            gap: 15px;
            margin-top: 20px;
        }

        .value-item {
            background: rgba(212, 175, 55, 0.1);
            padding: 15px 20px;
            border-radius: 12px;
            border-left: 4px solid #D4AF37;
            font-size: 1rem;
            line-height: 1.6;
            transition: transform 0.3s ease;
        }

        .value-item:hover {
            transform: translateX(5px);
            background: rgba(212, 175, 55, 0.15);
        }

        .value-item strong {
            color: #D4AF37;
            font-weight: bold;
        }

        .carousel-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(212, 175, 55, 0.9);
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .carousel-nav:hover {
            background: #D4AF37;
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .nav-prev {
            left: 20px;
        }

        .nav-next {
            right: 20px;
        }

        .carousel-indicators {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            z-index: 10;
        }

        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .indicator.active {
            background: #D4AF37;
            transform: scale(1.3);
        }

        .slide-number {
            position: absolute;
            top: 20px;
            right: 30px;
            background: rgba(212, 175, 55, 0.9);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @media (max-width: 768px) {
            .carousel-header h1 {
                font-size: 2rem;
            }

            .slide-content {
                flex-direction: column;
                text-align: center;
                gap: 30px;
            }

            .slide-icon {
                width: 100px;
                height: 100px;
            }

            .slide-icon i {
                font-size: 2.5rem;
            }

            .slide-text h2 {
                font-size: 2rem;
            }

            .carousel-nav {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }

            .nav-prev {
                left: 10px;
            }

            .nav-next {
                right: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="mvv-carousel-container">
        <div class="carousel-header">
            <h1>OUR MISSON VISSION & VALUES</h1>
        </div>

        <div class="carousel-wrapper">
            <div class="slide-number" id="slideNumber">1 / 3</div>
            
            <div class="carousel-track" id="carouselTrack">
                <!-- Mission Slide -->
                <div class="mvv-slide">
                    <div class="slide-content">
                        <div class="slide-icon">
                            <i class="fas fa-bullseye"></i>
                        </div>
                        <div class="slide-text">
                            <h2>Our Mission</h2>
                            <p>
                                Our mission is to inspire, empower, and equip girls and young women to lead with confidence, advocate for their rights, and drive lasting change. 
                                We are committed to fostering personal growth, promoting gender equality, and ensuring young women's voices shape the future of their communities and our nation.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Vision Slide -->
                <div class="mvv-slide">
                    <div class="slide-content">
                        <div class="slide-icon">
                            <i class="fas fa-eye"></i>
                        </div>
                        <div class="slide-text">
                            <h2>Our Vision</h2>
                            <p>
                                We envision a world where every girl and young woman is confident, capable, and free from violence. 
                                It is a world where she is empowered to lead, supported to achieve her dreams, and equipped to shape a just, equitable, and inclusive future.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Values Slide -->
                <div class="mvv-slide">
                    <div class="slide-content">
                        <div class="slide-icon">
                            <i class="fas fa-compass"></i>
                        </div>
                        <div class="slide-text">
                            <h2>Our Values</h2>
                            <div class="values-list">
                                <div class="value-item">
                                    <strong>Empowerment:</strong> We equip girls and young women with the tools, voice, and opportunities to transform their lives and lead boldly.
                                </div>
                                <div class="value-item">
                                    <strong>Gender Equality:</strong> We challenge discrimination, harmful norms, and power imbalances to ensure equal rights and opportunities.
                                </div>
                                <div class="value-item">
                                    <strong>Compassion:</strong> We lead with empathy, kindness, and respect, placing people and dignity at the center of our work.
                                </div>
                                <div class="value-item">
                                    <strong>Integrity:</strong> We uphold transparency, accountability, and strong ethical principles in everything we do.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation Arrows -->
            <button class="carousel-nav nav-prev" id="prevBtn">
                <i class="fas fa-chevron-left"></i>
            </button>
            <button class="carousel-nav nav-next" id="nextBtn">
                <i class="fas fa-chevron-right"></i>
            </button>

            <!-- Indicators -->
            <div class="carousel-indicators">
                <div class="indicator active" data-slide="0"></div>
                <div class="indicator" data-slide="1"></div>
                <div class="indicator" data-slide="2"></div>
            </div>
        </div>
    </div>

    <script>
        class MVVCarousel {
            constructor() {
                this.currentSlide = 0;
                this.totalSlides = 3;
                this.track = document.getElementById('carouselTrack');
                this.prevBtn = document.getElementById('prevBtn');
                this.nextBtn = document.getElementById('nextBtn');
                this.slideNumber = document.getElementById('slideNumber');
                this.indicators = document.querySelectorAll('.indicator');
                
                this.init();
            }

            init() {
                this.prevBtn.addEventListener('click', () => this.prevSlide());
                this.nextBtn.addEventListener('click', () => this.nextSlide());
                
                this.indicators.forEach((indicator, index) => {
                    indicator.addEventListener('click', () => this.goToSlide(index));
                });

                // Auto-play functionality (optional)
                // this.startAutoPlay();
            }

            nextSlide() {
                if (this.currentSlide < this.totalSlides - 1) {
                    this.currentSlide++;
                } else {
                    this.currentSlide = 0;
                }
                this.updateCarousel();
            }

            prevSlide() {
                if (this.currentSlide > 0) {
                    this.currentSlide--;
                } else {
                    this.currentSlide = this.totalSlides - 1;
                }
                this.updateCarousel();
            }

            goToSlide(slideIndex) {
                this.currentSlide = slideIndex;
                this.updateCarousel();
            }

            updateCarousel() {
                const translateX = -this.currentSlide * (100 / this.totalSlides);
                this.track.style.transform = `translateX(${translateX}%)`;
                
                this.slideNumber.textContent = `${this.currentSlide + 1} / ${this.totalSlides}`;
                
                this.indicators.forEach((indicator, index) => {
                    indicator.classList.toggle('active', index === this.currentSlide);
                });
            }

            startAutoPlay() {
                setInterval(() => {
                    this.nextSlide();
                }, 8000);
            }
        }

        // Initialize carousel when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new MVVCarousel();
        });

        // Add keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') {
                document.getElementById('prevBtn').click();
            } else if (e.key === 'ArrowRight') {
                document.getElementById('nextBtn').click();
            }
        });
    </script>

<!-- Impact Statistics Section -->
<section id="impact-stats-section" class="impact-stats-section scroll-reveal" data-aos="fade-up">
    <div class="container">
        <h2 class="section-title fade-in">Our Impact in Numbers</h2>
        <div class="stats-grid">
            <div class="stat-card fade-in">
                <div class="stat-icon">
                    <i class="fas fa-users"></i>
                </div>
                <div class="stat-number" data-target="500">0<span class="plus-sign" style="display:none;">+</span></div>
                <div class="stat-label">Girls Empowered</div>
                <div class="stat-description">Through our leadership development programs</div>
            </div>

            
            <div class="stat-card fade-in">
                <div class="stat-icon">
                    <i class="fas fa-globe"></i>
                </div>
                <div class="stat-number" data-target="4">0<span class="plus-sign" style="display:none;">+</span></div>
                <div class="stat-label">Countries Reached</div>
                <div class="stat-description">Across Africa, Asia, and beyond</div>
            </div>
            
            <div class="stat-card fade-in">
                <div class="stat-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <div class="stat-number" data-target="4">0<span class="plus-sign" style="display:none;">+</span></div>
                <div class="stat-label">Programs Delivered</div>
                <div class="stat-description">Workshops, training, and advocacy initiatives</div>
            </div>
            
            <div class="stat-card fade-in">
                <div class="stat-icon">
                    <i class="fas fa-handshake"></i>
                </div>
                <div class="stat-number" data-target="2">0</div>
                <div class="stat-label">Partner Organizations</div>
                <div class="stat-description">Collaborative relationships for greater impact</div>
            </div>
        </div>
    </div>
</section>

<!-- Our Approach Section -->
<section id="approach-section" class="approach-section" data-aos="fade-up">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title fade-in">Our Approach</h2>
            <p class="section-subtitle fade-in">At GYWAN, our work is intentional and multi-layered, starting with the individual and expanding outward to systems and global networks. Here's how we create impact at every level:</p>
        </div>
        <div class="approach-grid">
            <div class="approach-item fade-in">
                <div class="approach-number">01</div>
                <div class="approach-content">
                    <h3>Individual Empowerment</h3>
                    <p>We build the confidence, leadership, and life skills of girls and young women through mentorship, training, and capacity-building programs. We help them discover their voice, unlock their potential, and take charge of their futures.</p>
                </div>
            </div>
            <div class="approach-item fade-in">
                <div class="approach-number">02</div>
                <div class="approach-content">
                    <h3>Community Engagement</h3>
                    <p>We work within communities to shift mindsets, challenge harmful social norms, and build collective support for girls’ rights. Through advocacy campaigns, dialogues, and partnerships with local leaders, we foster safe and inclusive environments where girls and young women can thrive.</p>
                </div>
            </div>

            <div class="approach-item fade-in">
                <div class="approach-number">03</div>
                <div class="approach-content">
                    <h3>Systematic Change</h3>
                    <p>We engage in policy advocacy and institutional reform to address the root causes of inequality. By influencing national laws, programs, and power structures, we work to ensure that systems protect and promote the rights of girls and young women.</p>
                </div>
            </div>


            <div class="approach-item fade-in">
                <div class="approach-number">04</div>
                <div class="approach-content">
                    <h3>Global Partnership</h3>
                    <p>We collaborate with regional and international networks, amplifying local voices in global platforms. Through solidarity, shared learning, and cross-border advocacy, we position girls and young women as global change makers shaping a more just and equitable world.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Team Section -->
<section id="team-section" class="team-section" data-aos="fade-up">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title fade-in">Our Leadership Team</h2>
            <p class="section-subtitle fade-in">Meet the passionate leaders driving our mission forward</p>
        </div>

        <div class="team-grid">
            {% for member in team_members %}
            <div class="team-member-card" data-aos="fade-up">
                <div class="team-img-wrap">
                    {% if member.image %}
                        <img src="{{ member.image.url }}" alt="{{ member.name }}" class="team-img">
                    {% else %}
                        <img src="{% static 'images/placeholder-user.jpg' %}" alt="{{ member.name }}" class="team-img">
                    {% endif %}
                </div>
                <div class="team-info">
                    <h3 class="team-name">{{ member.name }}</h3>
                    <span class="team-role">{{ member.role }}</span>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- See More Button -->
        <div class="see-more-wrapper">
            <a href="{% url 'our_team' %}" class="btn-primary see-more-btn" aria-label="View Team Member Details">
                See More
            </a>
        </div>
    </div>
</section>

<!-- PARTNERS SECTION ( with slider) -->
<section class="partners scroll-reveal" style="background: #fff; padding: 48px 0 32px 0;">
  <div class="container partners-container" style="text-align:center;">
    <h2 style="font-size:2rem; color:#2c3e50; font-weight:700; margin-bottom:32px;">Our Partners</h2>
    <div class="partners-slider-outer">
      <div class="partners-slider-track">
        <img src="{% static 'images/partner1.png' %}" alt="Partner 1" class="partner-logo">
        <img src="{% static 'images/partner2.png' %}" alt="Partner 2" class="partner-logo">
        <img src="{% static 'images/partner1.png' %}" alt="Partner 3" class="partner-logo">
        <img src="{% static 'images/partner2.png' %}" alt="Partner 4" class="partner-logo">
        <!-- Duplicate for seamless loop -->
        <img src="{% static 'images/partner1.png' %}" alt="Partner 1" class="partner-logo">
        <img src="{% static 'images/partner2.png' %}" alt="Partner 2" class="partner-logo">
        <img src="{% static 'images/partner1.png' %}" alt="Partner 3" class="partner-logo">
        <img src="{% static 'images/partner2.png' %}" alt="Partner 4" class="partner-logo">
      </div>
    </div>
  </div>
</section>
<style>
  .partners-slider-outer {
    overflow: hidden;
    width: 100%;
    max-width: 1100px;
    margin: 0 auto;
    position: relative;
    height: 90px;
    display: flex;
    align-items: center;
  }
  .partners-slider-track {
    display: flex;
    align-items: center;
    gap: 40px;
    animation: partners-slide 7s linear infinite;
    will-change: transform;
  }
  .partner-logo {
    height: 60px;
    width: auto;
    opacity: 0.7;
    transition: filter 0.3s, opacity 0.3s;
    max-width: 180px;
    margin: 0 10px;
    object-fit: contain;
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(136,36,199,0.07);
    padding: 8px 16px;
    user-select: none;
    pointer-events: auto;
  }
  .partner-logo:hover {
    filter: grayscale(0%) brightness(1) contrast(1);
    opacity: 1;
  }
  @keyframes partners-slide {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); }
  }
  @media (max-width: 700px) {
    .partners-slider-track { gap: 24px; }
    .partner-logo { height: 40px; max-width: 110px; padding: 4px 8px; }
    .partners-slider-outer { height: 60px; }
  }
</style>
<script>
  // Pause slider on hover for accessibility
  document.addEventListener('DOMContentLoaded', function() {
    var track = document.querySelector('.partners-slider-track');
    var outer = document.querySelector('.partners-slider-outer');
    if (track && outer) {
      outer.addEventListener('mouseenter', function() {
        track.style.animationPlayState = 'paused';
      });
      outer.addEventListener('mouseleave', function() {
        track.style.animationPlayState = 'running';
      });
    }
  });
</script>


{% block extra_css %}
<style>


.team-section {
  background: #fff8fc;
  padding: 70px 0;
}
.team-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 40px;
  margin-top: 40px;
}
.team-member-card {
  background: #fff;
  border-radius: 20px;
  padding: 30px 20px;
  box-shadow: 0 8px 30px rgba(136, 36, 199, 0.06);
  transition: all 0.3s ease-in-out;
  text-align: center;
}
.team-member-card:hover {
  box-shadow: 0 12px 36px rgba(136, 36, 199, 0.15);
  transform: translateY(-6px) scale(1.03);
}
.team-img-wrap {
  width: 120px;
  height: 120px;
  margin: 0 auto 20px;
  border-radius: 50%;
  overflow: hidden;
  border: 4px solid #fff;
  box-shadow: 0 0 0 5px #e6dcf5;
}
.team-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
}
.team-name {
  font-size: 1.25rem;
  font-weight: 700;
  color: #8824C7;
  margin-bottom: 4px;
}
.team-role {
  font-size: 0.95rem;
  color: #7C1BB2;
  font-weight: 600;
  margin-bottom: 10px;
  display: block;
}
.team-bio {
  font-size: 0.95rem;
  color: #444;
  margin-bottom: 16px;
}
.team-social {
  display: flex;
  justify-content: center;
  gap: 12px;
}
.social-link {
  color: #8824C7;
  background: #f5ecff;
  font-size: 1.2rem;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: 0.2s;
}
.social-link:hover {
  background: #8824C7;
  color: #fff;
  transform: scale(1.1);
}

.see-more-wrapper {
    display: flex;
    justify-content: center;
    margin-top: 3rem;
}

.see-more-btn {
    width: 500px;
    max-width: 90%;
    display: inline-block;
    padding: 12px 24px;
    background-color: #6a1b9a;
    color: white;
    font-size: 1rem;
    font-weight: 600;
    text-decoration: none;
    border-radius: 8px;
    text-align: center;
    transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease;
    box-shadow: 0 4px 10px rgba(106, 27, 154, 0.3);
    letter-spacing: 1px;
    text-shadow: 0 0 6px rgba(255, 255, 255, 0.1);
}

.see-more-btn:hover {
    background-color: #7b1fa2;
    transform: translateY(-2px);
    box-shadow: 0 6px 14px rgba(106, 27, 154, 0.4);
}

.see-more-btn:active {
    transform: scale(0.97);
    box-shadow: 0 2px 6px rgba(106, 27, 154, 0.2);
}

@media (max-width: 768px) {
  .team-member-card {
    padding: 24px 16px;
  }
}
</style>
{% endblock %}

<script>
document.addEventListener("DOMContentLoaded", () => {
    const statsSection = document.querySelector('#impact-stats-section');
    let counted = false;

    function animateCounters() {
        if (counted) return; // prevent multiple runs
        const counters = document.querySelectorAll('.stat-number');
        counters.forEach(counter => {
            const target = +counter.getAttribute('data-target');
            const hasPlus = counter.querySelector('.plus-sign') !== null;
            let current = 0;
            const increment = target / 100; // 100 increments for smooth count
            counter.textContent = '0';
            if (hasPlus) {
                const plusSpan = document.createElement('span');
                plusSpan.classList.add('plus-sign');
                plusSpan.style.display = 'none';
                plusSpan.textContent = '+';
                counter.appendChild(plusSpan);
            }

            const updateCount = () => {
                current += increment;
                if (current >= target) {
                    counter.textContent = target.toFixed(0);
                    if (hasPlus) {
                        const plusSpan = document.createElement('span');
                        plusSpan.classList.add('plus-sign');
                        plusSpan.style.display = 'inline';
                        plusSpan.textContent = '+';
                        counter.appendChild(plusSpan);
                    }
                } else {
                    counter.textContent = Math.floor(current);
                    if (hasPlus) {
                        const plusSpan = document.createElement('span');
                        plusSpan.classList.add('plus-sign');
                        plusSpan.style.display = 'none';
                        plusSpan.textContent = '+';
                        counter.appendChild(plusSpan);
                        setTimeout(updateCount, 20);
                    } else {
                        setTimeout(updateCount, 20);
                    }
                }
            };
            updateCount();
        });
        counted = true;
    }

    function isInViewport(element) {
        const rect = element.getBoundingClientRect();
        return rect.top < window.innerHeight && rect.bottom >= 0;
    }

    function onScroll() {
        if (isInViewport(statsSection)) {
            animateCounters();
            window.removeEventListener('scroll', onScroll);
        }
    }

    window.addEventListener('scroll', onScroll);
    // Check immediately in case already in viewport
    onScroll();
});
</script>

{% endblock %}
